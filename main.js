//// EXAMPLE JSON FROM GOOGLE FIREBASE ////
let data = 
{
	// Personal Info
	personalInfo:
	{
		username: "Michael Ibrahim",
		bio: "I am currently developing a number of games and creative works using amazing (and free!) online tools such as Unity, Blender, Gravity Sketch, and Roblox. I'm fairly new in the computer science and game development industry, though I always love finding a new challenge to embark on.",
	},
	// List of headers & projects
	projects:
	[
		{
			id: "Games",
			name: "Games I've Made",
			image: "https://img4.goodfon.com/wallpaper/nbig/e/de/joystick-xbox-game-wallpaper-controller-xbox-one.jpg",
			content:
			[
				{
					name: "Well Chess But Actually No", 
					description: "Chess but with a twist!",
					status: "Finished",
					link: "https://mikeibrahim.itch.io/chess-3", 
					image: "https://img.itch.zone/aW1nLzUyMTY4ODMucG5n/315x250%23c/cL19m2.png", 
				},
				{
					name: "Superhot Dungeons",
					description: "A never-ending dungeon crawler where time moves only when you do!",
					status: "Finished",
					link: "https://mikeibrahim.itch.io/superhot-dungeons",
					image: "https://img.itch.zone/aW1nLzYyOTQ5OTMuanBn/315x250%23c/%2BbfdIW.jpg",
				},
				{
					name: "Hyperdrive",
					description: "Fast paced, endless runner with multiple ships for every playstyle.",
					status: "Finished",
					link: "https://mikeibrahim.itch.io/hyperdrive",
					image: "https://img.itch.zone/aW1nLzY2Mjk2NDEuanBn/315x250%23c/KLDiHT.jpg",
				},
				{
					name: "Retro Rush",
					description: "A fast paced top-down shooter with exciting upgrades!",
					status: "Finished",
					link: "https://mikeibrahim.itch.io/retro-rush",
					image: "https://img.itch.zone/aW1nLzQ0NTYwMjkuanBn/315x250%23c/TdWQUP.jpg",
				}
			]
		},
		{
			id: "Artwork",
			name: "My Artwork",
			image: "https://lh3.googleusercontent.com/l_dk5jlgtK6B8_qrsMMR-DkCQE0w-PQBWrVyLhRBOQD3LBIe2NNoPp8EWdss7hgETIWBzNo8OnHxrP7Xt8v-xEobAwwj1_ogOV6qzu8maT-nlAyLC0rNpTjNQaDQAXgA6hQNS2iYGiXUiZhNjlp0j6FZGQVRm7c3hv8tW00g7hYA9ahRKUCqDjSzBKZ_H6suurF7mQcSo8CmCSSHj4LembYuQmf8ksdAM3Ij6n4-jrdJ-Hgc0sMLa3Fk9FidTSsVZd6R6RaDrPwah7PdfCTiZOYvA_hs4I9N_vkgIScz5C-bb1cKCeCeEzCll_-lNDghHIHNoSUGUsK2ddK3UkjgTMbNcuWXHUSu3i6nzXSl6jUNSJ6SFB88ZXmrfpqK_d1tieIbAjYAwabqecDfadlUBtKTlMfdkNwqCiZhrYIg_ViVyjaG18IaKFycKqYXyYKhZpVxmnBq1C5ZLFKFbwwfKLLH8Js8VtW5SzZyfBIbbeEp8fCPG9GSFsin8PBijpYRBu3_VPnaID6B78kg6xtWCAcn6TbAcX1fl_0S3EsrfTwLjBT6Y3-iBC8wj43O6tawLIVFETrTjhJUY56HqzdVM3lqh0ZRFUudpbTEultzUzHHVPLvqI9PeRksuqGPU7122sHVvQO1_m8hLM_a5g_sM_8i01K9MvkKdmQITNJVIMuTLbajmchmAX9HQHwgqvAiMH9mXiZDhg-X7OpJfZc=w1915-h1078-no?authuser=0",
			content:
			[
				{
					name: "Lost In Space",
					description: "Made in Gravity Sketch & Blender",
					status: null,
					link: "https://lh3.googleusercontent.com/pw/AM-JKLWX9aOi5S2shl32PGnTvHGaVCmlS3HGEvLkyTx26tKgDNdWn74Lb4ldPW7U7DDlvNasEhw-sHSc_NpjGoOQw-iVw0B6GFfuxBuUCK8slxBI5uvYkXDHoUl7kojf0w6AZufh_iIQ3kQC9BWWxXC5VMVF=w1920-h1080-no?authuser=0",
					image: "https://lh3.googleusercontent.com/pw/AM-JKLWX9aOi5S2shl32PGnTvHGaVCmlS3HGEvLkyTx26tKgDNdWn74Lb4ldPW7U7DDlvNasEhw-sHSc_NpjGoOQw-iVw0B6GFfuxBuUCK8slxBI5uvYkXDHoUl7kojf0w6AZufh_iIQ3kQC9BWWxXC5VMVF=w1920-h1080-no?authuser=0",
				},
				{
					name: "Rundas",
					description: "Made in Gravity Sketch & Blender",
					status: null,
					link: "https://lh3.googleusercontent.com/pw/AM-JKLV9ycyvL2wDRVFwBQ7Jcaqq5KnQHJ5O2T9CJUvDCV8YJbc2Q1ka-N92tK3EsF4g4sm6w8LAFLIGhjuryo9F6CpIBGicYLfHncGf24irYUvBZTB7Z3o737O2jHULzpVf4SLf6MdvBltfr3kBajCbQ3jK=w1920-h1080-no?authuser=0",
					image: "https://lh3.googleusercontent.com/pw/AM-JKLV9ycyvL2wDRVFwBQ7Jcaqq5KnQHJ5O2T9CJUvDCV8YJbc2Q1ka-N92tK3EsF4g4sm6w8LAFLIGhjuryo9F6CpIBGicYLfHncGf24irYUvBZTB7Z3o737O2jHULzpVf4SLf6MdvBltfr3kBajCbQ3jK=w1920-h1080-no?authuser=0",
				},
				{
					name: "Alien",
					description: "Made in Gravity Sketch & Blender",
					status: null,
					link: "https://lh3.googleusercontent.com/pw/AM-JKLVLYzGeNaOXXN7vzRLG16tU2Wpv8A6v5VG9fmHPdTD4cmfRoC54UQKlXZzFxvDoEXRYO8aMApdhOI_gxnkE9b7tkRu9H04IhXfcaZRNdTnyJHNcMG3yXpcjX3e3GMJcQuW7y8bnIkl_2j6LA37sioXa=w1920-h1080-no?authuser=0",
					image: "https://lh3.googleusercontent.com/pw/AM-JKLVLYzGeNaOXXN7vzRLG16tU2Wpv8A6v5VG9fmHPdTD4cmfRoC54UQKlXZzFxvDoEXRYO8aMApdhOI_gxnkE9b7tkRu9H04IhXfcaZRNdTnyJHNcMG3yXpcjX3e3GMJcQuW7y8bnIkl_2j6LA37sioXa=w1920-h1080-no?authuser=0",
				},
				{
					name: "Spider Crab",
					description: "Made in Gravity Sketch & Blender",
					status: null,
					link: "https://lh3.googleusercontent.com/pw/AM-JKLX65F9bKmJQV318SNH9P0-Wv-q2oWFS27HHCYex-cts3F4cDf-IRYQjDh2lml4t7CpkEYgRjOx4uyenbqeSgOjIRunRhitRtOy1eTMoD_12M-IWCqkwZ-OiZEr-hOOEMeQUD_Y03eTYa-C-9C60trPN=w1920-h1080-no?authuser=0",
					image: "https://lh3.googleusercontent.com/pw/AM-JKLX65F9bKmJQV318SNH9P0-Wv-q2oWFS27HHCYex-cts3F4cDf-IRYQjDh2lml4t7CpkEYgRjOx4uyenbqeSgOjIRunRhitRtOy1eTMoD_12M-IWCqkwZ-OiZEr-hOOEMeQUD_Y03eTYa-C-9C60trPN=w1920-h1080-no?authuser=0",
				},
				{
					name: "Dragon Shrimp",
					description: "Made in Gravity Sketch & Blender",
					status: null,
					link: "https://lh3.googleusercontent.com/pw/AM-JKLWgEfQqUDEIPvKHjTDASQ3ajAl9wBXXImUdCyMhhbeoTdf-Gt2-cFA-XQcRtxI4DTYlOMyYFwOOZRu-cb5-iOMFz5kCdC2tEC4lk2oH2AQDxpiVYAk2rkCpzkOn1pvCV6nvv5QNBAPz7atNs95tvkzv=w1920-h1080-no?authuser=0",
					image: "https://lh3.googleusercontent.com/pw/AM-JKLWgEfQqUDEIPvKHjTDASQ3ajAl9wBXXImUdCyMhhbeoTdf-Gt2-cFA-XQcRtxI4DTYlOMyYFwOOZRu-cb5-iOMFz5kCdC2tEC4lk2oH2AQDxpiVYAk2rkCpzkOn1pvCV6nvv5QNBAPz7atNs95tvkzv=w1920-h1080-no?authuser=0",
				},
				{
					name: "Imperial Duel",
					description: "Made in Adobe Fresco",
					status: null,
					link: "https://lh3.googleusercontent.com/pw/AM-JKLWPs4GHg3CiP2hHpqn4zwoEccFGuNtLIONO4tDIBFfGnVhsg_dhDiVo71Hw34pfLnQR1FWB1HzyaC9KA4aKHss1Iogm88J2ncH2AB2n-oFke2ME0udHQsnBHm_juivFnyhMx0Vdskd19_cOzPb8_g0Y=w2625-h1968-no?authuser=0",
					image: "https://lh3.googleusercontent.com/pw/AM-JKLWPs4GHg3CiP2hHpqn4zwoEccFGuNtLIONO4tDIBFfGnVhsg_dhDiVo71Hw34pfLnQR1FWB1HzyaC9KA4aKHss1Iogm88J2ncH2AB2n-oFke2ME0udHQsnBHm_juivFnyhMx0Vdskd19_cOzPb8_g0Y=w2625-h1968-no?authuser=0",
				},
				{
					name: "Balance",
					description: "Made in Adobe Fresco",
					status: null,
					link: "https://lh3.googleusercontent.com/pw/AM-JKLUxmpYINiCzgM5qQOtf3XYqmVNanJYEnkMWg21WlwRUkg2Xd-hc6DJeckwgASt2s7M7Y8mA-j78qml0nd9HkwzAO8PA4tigRy-9u9289iBcagGcABCQ-LTrZbcM7e6YU-OgPD30uyvdBcYANP0dIBHH=w1440-h1079-no?authuser=0",
					image: "https://lh3.googleusercontent.com/pw/AM-JKLUxmpYINiCzgM5qQOtf3XYqmVNanJYEnkMWg21WlwRUkg2Xd-hc6DJeckwgASt2s7M7Y8mA-j78qml0nd9HkwzAO8PA4tigRy-9u9289iBcagGcABCQ-LTrZbcM7e6YU-OgPD30uyvdBcYANP0dIBHH=w1440-h1079-no?authuser=0",
				}
			]
		},
		{
			id: "Projects",
			name: "Github Projects",
			image: "https://images.unsplash.com/photo-1612198188060-c7c2a3b66eae?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Z2FtaW5nJTIwa2V5Ym9hcmR8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80",
			content:
			[
				{
					name: "Codeforces",
					description: "My attempt at solving CodeForces problems.",
					status: "Finished",
					link: "https://github.com/mikeibrahim/codeforces",
					image: null,
				},
				{
					name: "Mint",
					description: "2D Platformer Game created with my own art and animations.",
					status: "In Progress",
					link: "https://github.com/mikeibrahim/mint",
					image: null,
				},
				{
					name: "Assassin's Shadow",
					description: "A soul-knight style dungeon crawler.",
					status: "In Progress",
					link: "https://github.com/mikeibrahim/assassins_shadow",
					image: null,
				},
				{
					name: "Well Chess But Actually No",
					description: "A fun timed project for the Gunn 2021 Hackathon.",
					status: "Finished",
					link: "https://github.com/mikeibrahim/WellChessButActuallyNo",
					image: null,
				},
				{
					name: "Boxel Rebound",
					description: "Boxel rebound clone in unity",
					status: "Finished",
					link: "https://github.com/mikeibrahim/boxelrebound_unity",
					image: null,
				},
			]
		},
		{
			id: "Tools",
			name: "Tools I Use",
			image: "https://cdn.wallpapersafari.com/55/73/mGu9x3.jpg",
			content:
			[
				{
					name: "Unity",
					description: "Unity is a cross-platform game engine developed by Unity Technologies. It was originally released in 2005 for the Xbox, and has since been developed by many companies to power their games.",
					status: null,
					link: "https://unity.com/",
					image: null,
				},
				{
					name: "Blender",
					description: "Blender is a free and open-source 3D computer graphics software product created by the Blender Foundation, a non-profit organization based in Amsterdam, Netherlands.",
					status: null,
					link: "https://www.blender.org/",
					image: null,
				},
				{
					name: "Gravity Sketch",
					description: "Gravity Sketch is a free 3D virtual reality software product created by the Gravity Sketch Foundation, an organization based in London, UK.",
					status: null,
					link: "https://gravitysketch.com/",
					image: null,
				},
				{
					name: "Roblox",
					description: "Roblox is a free 3D game engine created by the Roblox Corporation, a company based in San Mateo, California.",
					status: null,
					link: "https://www.roblox.com/",
					image: null,
				}
			]
		}
	]
};


//// HELPER FUNCTIONS ////
function makeNavbar(projects) {
	// Add projects to navbar
	let navItemHolder = document.getElementById("navItemHolder");
	projects.forEach(item => {
		let navItem = document.createElement("li");
		navItem.className = "nav-item";
		navItem.innerHTML = `<a class="nav-link" href="#${item}Header">${item}</a>`;
		navItemHolder.appendChild(navItem);
	});
}

// make the above comment into javascript so it can be dynamically added to the page
function makeheader(parent, name, image) {
	let header = document.createElement("div");
	header.className = "col-lg-12 text-center";
	
	let headerTitle = document.createElement("h2");
	headerTitle.className = "headerText section-heading";
	headerTitle.innerHTML = name;
	header.appendChild(headerTitle);
	
	parent.style.backgroundImage = "url(" + image + ")";
	parent.appendChild(header);
}

function makeCell(parent, name, description, status, link, image) {
	// Create the cell
	let cell = document.createElement("div");
	cell.className = "cell col-lg-4 col-md-6 text-center";
	
	// Create the link to project
	let cellLink = document.createElement("a");
	cellLink.href = link;
	cellLink.target = "_blank";
	cell.appendChild(cellLink);
	
	// Create the (optional) project image
	if (image) {
		let cellImage = document.createElement("img");
		cellImage.src = image;
		cellImage.alt = name;
		cellImage.className = "img-fluid cellImage";
		cellLink.appendChild(cellImage);
	}

	// Create the project name
	let cellName = document.createElement("h3");
	cellName.innerText = name;
	cellLink.appendChild(cellName);

	// Create the (optional) project status
	if (status) {
		let cellStatus = document.createElement("h5");
		cellStatus.innerText = status;
		cell.appendChild(cellStatus);
	}

	// Create the project description
	let cellDescription = document.createElement("p");
	cellDescription.className = "text-muted";
	cellDescription.innerText = description;
	cell.appendChild(cellDescription);

	// Store the cell in the parent
	parent.appendChild(cell);
}


//// BUILDING THE PAGE ////
let personalInfo = data.personalInfo;
let projects = data.projects;

// Making the navbar
let projectList = []; // a list of projects
projects.forEach(project => {projectList.push(project.id);});
makeNavbar(projectList);

let usernames = document.querySelectorAll(".username");
console.log(usernames);
usernames.forEach(username => {
	username.innerHTML = personalInfo.username;
});

let bio = document.getElementById("bio");
bio.innerHTML = personalInfo.bio;

// Making the projects
let container = document.getElementById("container");
projects.forEach(project => {
	// Headers for each project
	let divHeader = document.createElement("div");
	divHeader.className = "row cellHeader";
	makeheader(divHeader, project.name, project.image);

	// Cell for each project in that cetegory
	let divHolder = document.createElement("div");
	divHolder.className = "row cellHolder";
	project.content.forEach(item => {
		makeCell(divHolder, item.name, item.description, item.status, item.link, item.image);
	});
	
	// Adding the divs to the container
	container.appendChild(divHeader);
	container.appendChild(divHolder);
});

// Cell Animation
const cells = document.querySelectorAll(".cell");
cells.forEach(cell => {
	const observer = new IntersectionObserver(entries => {
		entries.forEach(entry => {
			if (entry.isIntersecting) {
				cell.classList.add("cell_animation");
				cell.classList.remove("cell_hidden");
			} else {
				cell.classList.remove("cell_animation");
				cell.classList.add("cell_hidden");
			}
		});
	});
	observer.observe(cell);
});